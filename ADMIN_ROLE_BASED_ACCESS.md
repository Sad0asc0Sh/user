# ุณุณุชู ุฏุณุชุฑุณ ุจุฑ ุงุณุงุณ ููุด ุฏุฑ ูพูู ุงุฏูู

## ๐ ููุง ฺฉู

ุณุณุชู ูพูู ุงุฏูู ุงฺฉููู ุจู ุทูุฑ ฺฉุงูู ุงุฒ **Role-Based Access Control (RBAC)** ูพุดุชุจุงู ูโฺฉูุฏ.

## ๐ฅ ููุดโูุง ููุฌูุฏ

| ููุด | ุชูุถุญุงุช | ุฏุณุชุฑุณโูุง |
|-----|---------|-----------|
| **admin** | ุงุฏูู ูุนููู | ุฏุณุชุฑุณ ุจู ูุญุตููุงุชุ ุณูุงุฑุดุงุชุ ูุดุชุฑุงูุ ูุญุชูุงุ ุชฺฉุชโูุงุ ฺฏุฒุงุฑุดุงุช |
| **manager** | ูุฏุฑ | ููู ุฏุณุชุฑุณโูุง admin + ุชูุธูุงุช ุณุณุชู |
| **superadmin** | ูุฏุฑ ุงุฑุดุฏ | ุฏุณุชุฑุณ ฺฉุงูู ุจู ููู ุจุฎุดโูุง ุดุงูู ูุฏุฑุช ุงุฏููโูุง |

## ๐ ุฌุฏูู ุฏุณุชุฑุณโูุง ฺฉุงูู

| ุจุฎุด | admin | manager | superadmin |
|-----|-------|---------|------------|
| ุฏุงุดุจูุฑุฏ | โ | โ | โ |
| ูุญุตููุงุช | โ | โ | โ |
| ุฏุณุชูโุจูุฏโูุง | โ | โ | โ |
| ุจุฑูุฏูุง | โ | โ | โ |
| ููุฌูุฏ | โ | โ | โ |
| ูุธุฑุงุช | โ | โ | โ |
| ุณูุงุฑุดุงุช | โ | โ | โ |
| ูุฑุฌูุนโูุง | โ | โ | โ |
| ุณุจุฏูุง ุฑูุง ุดุฏู | โ | โ | โ |
| ูุดุชุฑุงู | โ | โ | โ |
| ฺฉุฏูุง ุชุฎูู | โ | โ | โ |
| ุชุฎููโูุง ุฒูุงูโุฏุงุฑ | โ | โ | โ |
| ุชูุธูุงุช ุงุฑุณุงู | โ | โ | โ |
| ูุฏุฑุช ุตูุญุงุช | โ | โ | โ |
| ูุจูุงฺฏ | โ | โ | โ |
| ุจูุฑูุง | โ | โ | โ |
| ุงุนูุงูุงุช | โ | โ | โ |
| ุชฺฉุชโูุง | โ | โ | โ |
| ฺฏุฒุงุฑุดุงุช | โ | โ | โ |
| **ุชูุธูุงุช ุณุณุชู** | โ | โ | โ |
| **ูุฏุฑุช ุงุฏููโูุง** | โ | โ | โ |

## ๐๏ธ ูพุงุฏูโุณุงุฒ ูู

### 1. ูุญุงูุธุช ุฏุฑ ุณุทุญ Routing

**ูุงู:** `admin/src/App.jsx`

```javascript
{/* Settings - Only for manager and superadmin */}
<Route
  path="/settings"
  element={
    user?.role === 'manager' || user?.role === 'superadmin'
      ? <SettingsPage />
      : <Navigate to="/" />
  }
/>

{/* Admins - Only for superadmin */}
<Route
  path="/admins"
  element={
    user?.role === 'superadmin'
      ? <AdminsPage />
      : <Navigate to="/" />
  }
/>
```

### 2. ููุงุด ุดุฑุท ุฏุฑ ููู

**ูุงู:** `admin/src/components/layout/MainLayout.jsx`

```javascript
const isManagerOrSuperAdmin = role === 'manager' || role === 'superadmin'
const isSuperAdmin = role === 'superadmin'

const menuItems = [
  // ... ุณุงุฑ ุขุชูโูุง

  // Settings - Only for manager and superadmin
  ...(isManagerOrSuperAdmin
    ? [
        {
          key: '/settings',
          icon: <SettingOutlined />,
          label: <Link to="/settings">ุชูุธูุงุช</Link>,
        },
      ]
    : []),

  // Admins Management - Only for superadmin
  ...(isSuperAdmin
    ? [
        {
          key: '/admins',
          icon: <TeamOutlined />,
          label: <Link to="/admins">ูุฏุฑุช ุงุฏููโูุง</Link>,
        },
      ]
    : []),
]
```

### 3. ููู ฺฉุงุฑุจุฑ ุฏุฑ Header

```javascript
const userMenu = {
  items: [
    {
      key: 'profile',
      icon: <UserOutlined />,
      label: 'ูพุฑููุงู ฺฉุงุฑุจุฑ',
    },
    // Settings - Only for manager and superadmin
    ...(isManagerOrSuperAdmin
      ? [
          {
            key: 'settings',
            icon: <SettingOutlined />,
            label: <Link to="/settings">ุชูุธูุงุช</Link>,
          },
        ]
      : []),
    { type: 'divider' },
    {
      key: 'logout',
      icon: <LogoutOutlined />,
      label: 'ุฎุฑูุฌ',
    },
  ],
}
```

## ๐ ุงููุช ฺูุฏูุงู

ุณุณุชู ุฏุณุชุฑุณ ุฏุฑ **ุณู ูุงู** ฺฉูุชุฑู ูโุดูุฏ:

1. **UI Layer (Frontend):**
   - ููููุง ููุท ุจุฑุง ููุดโูุง ูุฌุงุฒ ููุงุด ุฏุงุฏู ูโุดููุฏ
   - ฺฉุงุฑุจุฑ ุงุตูุงู ฺฏุฒููโูุง ุบุฑูุฌุงุฒ ุฑุง ููโุจูุฏ

2. **Routing Layer (Frontend):**
   - ุงฺฏุฑ ฺฉุงุฑุจุฑ ูุณุชููุงู URL ูุงุฑุฏ ฺฉูุฏุ ุจู Dashboard ูุฏุงุช ูโุดูุฏ
   - `<Navigate to="/" />` ุจุฑุง ุฏุณุชุฑุณโูุง ุบุฑูุฌุงุฒ

3. **Backend Layer (API):**
   - ุฏุฑ backend ูู middleware ุงุญุฑุงุฒ ููุช ู ูุฌูุฒ ูุฌูุฏ ุฏุงุฑุฏ
   - ุญุช ุงฺฏุฑ frontend bypass ุดูุฏุ backend ุฏุณุชุฑุณ ุฑุง ุฑุฏ ูโฺฉูุฏ

## ๐ ูุญูู ุงุณุชูุงุฏู

### ุชุบุฑ ููุด ฺฉุงุฑุจุฑ

ุจุฑุง ุชุบุฑ ููุด ฺฉ ฺฉุงุฑุจุฑุ ุงุฒ ุทุฑู ูพูู Superadmin:

1. ุจู **ูุฏุฑุช ุงุฏููโูุง** ุจุฑูุฏ (ููุท superadmin)
2. ฺฉุงุฑุจุฑ ููุฑุฏ ูุธุฑ ุฑุง ุงูุชุฎุงุจ ฺฉูุฏ
3. ููุด ุฑุง ุจู `admin`, `manager` ุง `superadmin` ุชุบุฑ ุฏูุฏ

### ุงูุฒูุฏู ุจุฎุด ุฌุฏุฏ ุจุง ูุญุฏูุฏุช ุฏุณุชุฑุณ

#### ูุฑุญูู 1: ุงุถุงูู ฺฉุฑุฏู Route

```javascript
<Route
  path="/new-section"
  element={
    user?.role === 'superadmin'
      ? <NewSectionPage />
      : <Navigate to="/" />
  }
/>
```

#### ูุฑุญูู 2: ุงุถุงูู ฺฉุฑุฏู ุจู ููู

```javascript
...(isSuperAdmin
  ? [
      {
        key: '/new-section',
        icon: <SomeIcon />,
        label: <Link to="/new-section">ุจุฎุด ุฌุฏุฏ</Link>,
      },
    ]
  : []),
```

## ๐ ุฑูุน ูุดฺฉู ูุจู

### ูุดฺฉู:
- ฺฉุงุฑุจุฑุงู ุจุง ููุด `admin` ูโุชูุงูุณุชูุฏ ููู "ุชูุธูุงุช" ู "ูุฏุฑุช ุงุฏููโูุง" ุฑุง ุจุจููุฏ
- ููุช ฺฉูฺฉ ูโฺฉุฑุฏูุฏุ ุจู Dashboard ุจุฑฺฏุฑุฏุงูุฏู ูโุดุฏูุฏ
- ุงู ุจุงุนุซ ุณุฑุฏุฑฺฏู ฺฉุงุฑุจุฑ ูโุดุฏ

### ุฑุงู ุญู:
- โ ููููุง ููุท ุจุฑุง ููุดโูุง ูุฌุงุฒ ููุงุด ุฏุงุฏู ูโุดููุฏ
- โ ฺฉุงุฑุจุฑุงู ููุท ฺฏุฒููโูุง ฺฉู ุฏุณุชุฑุณ ุฏุงุฑูุฏ ุฑุง ูโุจููุฏ
- โ ุชุฌุฑุจู ฺฉุงุฑุจุฑ ุจูุชุฑ ู ูุงุถุญโุชุฑ

## ๐งช ุชุณุช

ุจุฑุง ุชุณุช ฺฉุงูู ุณุณุชู:

1. **ุจุง ููุด admin:**
   ```
   - ูุจุงุฏ "ุชูุธูุงุช" ุฏุฑ ููู ุจุงุดุฏ โ
   - ูุจุงุฏ "ูุฏุฑุช ุงุฏููโูุง" ุฏุฑ ููู ุจุงุดุฏ โ
   - ุฏุณุชุฑุณ ุจู /settings โ Redirect to / โ
   - ุฏุณุชุฑุณ ุจู /admins โ Redirect to / โ
   ```

2. **ุจุง ููุด manager:**
   ```
   - ุจุงุฏ "ุชูุธูุงุช" ุฏุฑ ููู ุจุงุดุฏ โ
   - ูุจุงุฏ "ูุฏุฑุช ุงุฏููโูุง" ุฏุฑ ููู ุจุงุดุฏ โ
   - ุฏุณุชุฑุณ ุจู /settings โ ููุงุด ุตูุญู โ
   - ุฏุณุชุฑุณ ุจู /admins โ Redirect to / โ
   ```

3. **ุจุง ููุด superadmin:**
   ```
   - ุจุงุฏ "ุชูุธูุงุช" ุฏุฑ ููู ุจุงุดุฏ โ
   - ุจุงุฏ "ูุฏุฑุช ุงุฏููโูุง" ุฏุฑ ููู ุจุงุดุฏ โ
   - ุฏุณุชุฑุณ ุจู /settings โ ููุงุด ุตูุญู โ
   - ุฏุณุชุฑุณ ุจู /admins โ ููุงุด ุตูุญู โ
   ```

## ๐ ูฺฉุงุช ููู

1. **Default Role:** ุงฺฏุฑ role ุชุนู ูุดุฏู ุจุงุดุฏุ ุจู `'user'` ุชูุธู ูโุดูุฏ ฺฉู ูฺ ุฏุณุชุฑุณ ุฎุงุต ูุฏุงุฑุฏ
2. **Case Sensitive:** ููุดโูุง case-sensitive ูุณุชูุฏ (`superadmin` ูู `SuperAdmin`)
3. **Token Expiry:** ููุช token ูููุถ ูโุดูุฏุ ฺฉุงุฑุจุฑ ุจู ุตูุญู login ูุฏุงุช ูโุดูุฏ
4. **Protected Routes:** ููู routeโูุง admin ุฏุฑ ุฏุงุฎู `<AdminDataProvider>` ู `<MainLayout>` ูุณุชูุฏ

## ๐ ุณุงุฒฺฏุงุฑ ุจุง Backend

ุงู ุณุณุชู ุจุง API Backend ููุงููฺฏ ุงุณุช:

**Backend Middleware:**
```javascript
authorize('admin', 'manager', 'superadmin')
```

**Frontend Check:**
```javascript
user?.role === 'manager' || user?.role === 'superadmin'
```

---

**ูุณุฎู:** 1.0
**ุขุฎุฑู ุจูโุฑูุฒุฑุณุงู:** 2025-01-26
**ุชูุณุนูโุฏููุฏู:** ุชู ูููโูุชุง
