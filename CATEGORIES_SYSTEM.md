# ุณุณุชู ฺฉูพุงุฑฺู ุฏุณุชูโุจูุฏโูุง

## ๐ ููุง ฺฉู

ุณุณุชู ุฏุณุชูโุจูุฏโูุง ูุฑุงูุชโุงูุฏ ฺฉุงุฑุจุฑ ุงฺฉููู ุจู ุทูุฑ ฺฉุงูู ุจุง ูพูู ุงุฏูู ู Backend ฺฉูพุงุฑฺู ุดุฏู ุงุณุช.

## ๐๏ธ ูุนูุงุฑ

### Backend (Node.js + MongoDB)

**ูุฏู ุฏุชุงุจุณ:** `welfvita-backend/models/Category.js`
- ุณุงุฎุชุงุฑ ุฏุฑุฎุช (Tree Structure) ุจุง parent-child relationship
- ูพุดุชุจุงู ุงุฒ ฺูุฏู ุณุทุญ ุฒุฑูุฌููุนู (unlimited nesting)
- ุขูพููุฏ ุขฺฉูู ู ุชุตูุฑ ุฑู Cloudinary
- ููุฏูุง `isFeatured` ู `isPopular` ุจุฑุง ููุงุด ุฏุฑ ุตูุญู ุงุตู
- ุชููุฏ slug ุฎูุฏฺฉุงุฑ ุงุฒ ูุงู ุฏุณุชูโุจูุฏ

**API Endpoints:**
```
GET  /api/categories/tree      โ ุฏุฑุงูุช ุฏุฑุฎุช ฺฉุงูู ุฏุณุชูโุจูุฏโูุง
GET  /api/categories           โ ูุณุช ุชูุงู ุฏุณุชูโุจูุฏโูุง (ุจุง ููุชุฑูุง)
GET  /api/categories/:id       โ ุฏุฑุงูุช ฺฉ ุฏุณุชูโุจูุฏ
POST /api/categories           โ ุงุฌุงุฏ ุฏุณุชูโุจูุฏ ุฌุฏุฏ (ููุท ุงุฏูู)
PUT  /api/categories/:id       โ ูุฑุงุด ุฏุณุชูโุจูุฏ (ููุท ุงุฏูู)
DELETE /api/categories/:id     โ ุญุฐู ุฏุณุชูโุจูุฏ (ููุท ุงุฏูู)
```

### Frontend Services

**ูุงู:** `frontend/src/services/categoryService.ts`

ูุชุฏูุง ููุฌูุฏ:
- `getTree()` - ุฏุฑุงูุช ุฏุฑุฎุช ฺฉุงูู
- `getPopular()` - ุฏุณุชูโุจูุฏโูุง ูุญุจูุจ
- `getFeatured()` - ุฏุณุชูโุจูุฏโูุง ูฺู
- `getAll(params)` - ูุณุช ุจุง ููุชุฑ
- `getRootCategories()` - ุฏุณุชูโุจูุฏโูุง ุณุทุญ ุฑุดู
- `getById(id)` - ุฏุฑุงูุช ฺฉ ุฏุณุชูโุจูุฏ
- `getChildren(parentId)` - ุฒุฑูุฌููุนูโูุง ฺฉ ุฏุณุชูโุจูุฏ

### Frontend UI Components

#### 1. ุตูุญู ุงุตู ุฏุณุชูโุจูุฏโูุง
**ูุงู:** `frontend/src/app/categories/page.tsx`
- ฺฉ wrapper ุณุงุฏู ุจุฑุง CategoriesContent

#### 2. ฺฉุงููพูููุช ูุญุชูุง ุฏุณุชูโุจูุฏโูุง
**ูุงู:** `frontend/src/components/features/categories/CategoriesContent.tsx`

**ูฺฺฏโูุง:**
- ููุงุด ุฏุณุชูโุจูุฏโูุง ุงุตู ุฏุฑ ุณุงุฏุจุงุฑ ุฑุงุณุช
- ููุงุด ุฒุฑูุฌููุนูโูุง ุจู ุตูุฑุช ุขฺฉุงุฑุฏุฆูู ุฏุฑ ุณูุช ฺูพ
- ูพุดุชุจุงู ุงุฒ ุขฺฉููโูุง ู ุชุตุงูุฑ ุงุฒ Cloudinary
- ุงููุดูโูุง ุฑูุงู ุจุง Framer Motion
- ุญุงูุชโูุง Loading, Error ู Empty State
- ููฺฉโูุง ูุณุชูู ุจู ุตูุญู ูุญุตููุงุช ุจุง slug

#### 3. Sheet ุฏุณุชูโุจูุฏโูุง
**ูุงู:** `frontend/src/components/features/categories/CategoriesSheet.tsx`
- ููุงุด CategoriesContent ุฏุฑ ฺฉ Sheet ุงุฒ ูพุงู ุตูุญู
- ุงุณุชูุงุฏู ุฏุฑ Header ุจุฑุง ุฏุณุชุฑุณ ุณุฑุน

## ๐จ ุทุฑุงุญ UI

### ุณุงุฏุจุงุฑ ุฑุงุณุช (ุฏุณุชูโุจูุฏโูุง ุงุตู)
- ููุงุด ุขฺฉูู + ูุงู
- Indicator ููุงุฑ ุนููุฏ ุจุฑุง ุฏุณุชูโุจูุฏ ูุนุงู
- ุฑูฺฏโุขูุฒ ุจุง Vita Theme
- Hover effects

### ุจุฎุด ูุญุชูุง (ุฒุฑูุฌููุนูโูุง)
- Accordion ุจุฑุง ูุฑ ุฒุฑุฏุณุชู
- Grid 3 ุณุชูู ุจุฑุง ููุงุด ูุญุตููุงุช
- ุชุตูุฑ ุฏุงุฑูโุง + ูุงู
- ููฺฉ ุจู ุตูุญู ููุชุฑ ุดุฏู ูุญุตููุงุช

### ุญุงูุชโูุง ุฎุงุต
- **Loading:** Spinner ุจุง ูพุงู ูุงุฑุณ
- **Error:** ุขฺฉูู + ูพุงู ุฎุทุง + ุฏฺฉูู ุชูุงุด ูุฌุฏุฏ
- **Empty:** ุขฺฉูู + ูพุงู "ุฏุณุชูโุจูุฏ ููุฌูุฏ ูุณุช"

## ๐ฑ ูุณุฑูุง ฺฉูพุงุฑฺู

```
/categories                    โ ุตูุญู ุฏุณุชูโุจูุฏโูุง
/products?category={slug}      โ ููุชุฑ ูุญุตููุงุช ุจุฑ ุงุณุงุณ ุฏุณุชูโุจูุฏ
```

## ๐ ุฌุฑุงู ุฏุงุฏู

```
โโโโโโโโโโโโโโโ
โ   Admin     โ โ ุงุฏูู ุฏุณุชูโุจูุฏโูุง ุฑุง ุงุฒ ูพูู ูุฏุฑุช ูโฺฉูุฏ
โโโโโโโโฌโโโโโโโ
       โ POST/PUT/DELETE
       โผ
โโโโโโโโโโโโโโโ
โ  Backend    โ โ ุฐุฎุฑู ุฏุฑ MongoDB + ุขูพููุฏ ุจู Cloudinary
โโโโโโโโฌโโโโโโโ
       โ GET
       โผ
โโโโโโโโโโโโโโโ
โ  Frontend   โ โ ููุงุด ุฏุฑ UI ฺฉุงุฑุจุฑ
โโโโโโโโโโโโโโโ
```

## ๐ฏ ูุฒุงุง ุณุณุชู ฺฉูพุงุฑฺู

### 1. **Single Source of Truth**
- ุชูุงู ุฏุณุชูโุจูุฏโูุง ุงุฒ Backend ูโุขูุฏ
- ูฺ Mock Data ุฏุฑ ูุฑุงูุชโุงูุฏ ูุฌูุฏ ูุฏุงุฑุฏ

### 2. **Auto-Sync ุจุง ุงุฏูู**
- ูุฑ ุชุบุฑ ุฏุฑ ูพูู ุงุฏูู ููุฑุงู ุฏุฑ ุณุงุช ฺฉุงุฑุจุฑ ุงุนูุงู ูโุดูุฏ
- ุจุฏูู ูุงุฒ ุจู ุฏูพูู ูุฌุฏุฏ

### 3. **Scalable**
- ูพุดุชุจุงู ุงุฒ ูุงูุญุฏูุฏ ุณุทุญ ุฒุฑูุฌููุนู
- Pagination ุจุฑุง ุฏุณุชูโุจูุฏโูุง ุฒุงุฏ

### 4. **SEO Friendly**
- ุงุณุชูุงุฏู ุงุฒ slugโูุง ููุญุตุฑุจูโูุฑุฏ
- URLโูุง ุชูุฒ ู ูุงุจู ููู

### 5. **Performance**
- ุชุตุงูุฑ ุงุฒ CDN Cloudinary
- Tree structure ุจุฑุง ุจุงุฑฺฏุฐุงุฑ ุณุฑุน
- Caching ุฏุฑ ุณูุช Backend

## ๐ ูุญูู ุงุณุชูุงุฏู ุฏุฑ ฺฉุงููพูููุชโูุง

### ูุซุงู 1: ููุงุด ุฏุณุชูโุจูุฏโูุง ูุญุจูุจ

```tsx
import { categoryService } from "@/services/categoryService";

export default function PopularCategories() {
  const [categories, setCategories] = useState([]);

  useEffect(() => {
    categoryService.getPopular().then(setCategories);
  }, []);

  return (
    <div>
      {categories.map(cat => (
        <Link key={cat._id} href={`/products?category=${cat.slug}`}>
          {cat.icon?.url && <img src={cat.icon.url} alt={cat.name} />}
          <span>{cat.name}</span>
        </Link>
      ))}
    </div>
  );
}
```

### ูุซุงู 2: ููุงุด ุฏุฑุฎุช ฺฉุงูู

```tsx
import { categoryService } from "@/services/categoryService";

export default function CategoryTree() {
  const [tree, setTree] = useState([]);

  useEffect(() => {
    categoryService.getTree().then(setTree);
  }, []);

  const renderCategory = (category) => (
    <div key={category._id}>
      <h3>{category.name}</h3>
      {category.children?.map(renderCategory)}
    </div>
  );

  return <div>{tree.map(renderCategory)}</div>;
}
```

## ๐ง ุชูุธูุงุช ููุฑุฏ ูุงุฒ

### 1. Cloudinary Domain
ุฏุฑ `next.config.ts` ุจุงุฏ ุงุถุงูู ุดูุฏ:

```typescript
images: {
  remotePatterns: [
    {
      protocol: "https",
      hostname: "res.cloudinary.com",
    },
  ],
}
```

โ **ุฏุฑ ุญุงู ุญุงุถุฑ ุงุถุงูู ุดุฏู ุงุณุช**

### 2. Backend URL
ุฏุฑ `frontend/src/lib/api.ts` ุจุงุฏ baseURL ุตุญุญ ุจุงุดุฏ:

```typescript
const api = axios.create({
  baseURL: process.env.NEXT_PUBLIC_API_URL || "http://localhost:5000/api",
});
```

## ๐จ Customization

### ุชุบุฑ ุฑูฺฏโูุง
ุฑูฺฏโูุง ุงุณุชูุงุฏู ุดุฏู:
- `vita-500`, `vita-600`, `vita-700` โ ุฑูฺฏ ุงุตู
- `gray-50`, `gray-100`, ... โ ุฑูฺฏโูุง ุฎูุซ

ุจุฑุง ุชุบุฑุ `tailwind.config.js` ุฑุง ูุฑุงุด ฺฉูุฏ.

### ุชุบุฑ Layout
- ุนุฑุถ ุณุงุฏุจุงุฑ: `w-[28%]` ุฏุฑ CategoriesContent
- ุชุนุฏุงุฏ ุณุชููโูุง grid: `grid-cols-3`

## ๐ ุขูุฏู (ูพุดููุงุฏุงุช)

1. **Search ุฏุฑ ุฏุณุชูโุจูุฏโูุง**
   - ุงุถุงูู ฺฉุฑุฏู ุฌุณุชุฌู ุฏุฑ ุจุงูุง ุตูุญู

2. **Breadcrumb**
   - ููุงุด ูุณุฑ ุฏุณุชูโุจูุฏ ูุนุงู

3. **Product Count**
   - ููุงุด ุชุนุฏุงุฏ ูุญุตููุงุช ูุฑ ุฏุณุชูโุจูุฏ

4. **Filtering**
   - ููุชุฑ ุจุฑ ุงุณุงุง `isFeatured`, `isPopular`

5. **Caching**
   - ุงุณุชูุงุฏู ุงุฒ React Query ุง SWR ุจุฑุง cache ฺฉุฑุฏู

## โ ุชุณุช ุณุณุชู

ุจุฑุง ุชุณุช ฺฉุงูู:

1. **ุฏุฑ ูพูู ุงุฏูู:**
   - ุฏุณุชูโุจูุฏ ุฌุฏุฏ ุงุฌุงุฏ ฺฉูุฏ
   - ุขฺฉูู ู ุชุตูุฑ ุขูพููุฏ ฺฉูุฏ
   - ุฒุฑูุฌููุนู ุงุถุงูู ฺฉูุฏ
   - Featured/Popular ุฑุง ูุนุงู ฺฉูุฏ

2. **ุฏุฑ ุณุงุช ฺฉุงุฑุจุฑ:**
   - `/categories` ุฑุง ุจุงุฒ ฺฉูุฏ
   - ุจุงุฏ ุฏุณุชูโุจูุฏ ุฌุฏุฏ ููุงุด ุฏุงุฏู ุดูุฏ
   - ุฑู ุขู ฺฉูฺฉ ฺฉูุฏ
   - ุฒุฑูุฌููุนูโูุง ุจุงุฏ ููุงุด ุฏุงุฏู ุดููุฏ

3. **ุชุณุช Error Handling:**
   - Backend ุฑุง ุฎุงููุด ฺฉูุฏ
   - ุตูุญู ุจุงุฏ Error State ููุงุด ุฏูุฏ
   - ุฏฺฉูู "ุชูุงุด ูุฌุฏุฏ" ุจุงุฏ ฺฉุงุฑ ฺฉูุฏ

---

**ุณุงุฎุชู ุดุฏู ุจุง โค๏ธ ุจุฑุง ูููโูุชุง**
